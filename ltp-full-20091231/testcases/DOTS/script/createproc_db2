db2 connect to TESTDB

db2 drop procedure QUERY_PROC
db2 drop procedure UPDATE_PROC

db2 	"create procedure QUERY_PROC (IN CONDITION INTEGER, OUT COUNT INTEGER) 
     	LANGUAGE SQL DYNAMIC RESULT SETS 1 
	BEGIN 
		DECLARE curl CURSOR WITH RETURN TO CALLER FOR 
			SELECT * 
			FROM BASIC1, BASIC2, BASIC3 
			WHERE BASIC1.ID_1 = BASIC3.ID_1 and BASIC2.ID_2 = BASIC3.ID_2 and basic3.rnd_int > CONDITION; 
		OPEN curl;
	END "
	
db2	"create procedure UPDATE_PROC (IN VALUE INTEGER, IN CONDITION CHAR(15)) 
     	LANGUAGE SQL 
	BEGIN 
		UPDATE BASIC2 
		SET RND_Integer=VALUE 
		WHERE BASIC2.ID_2 like CONDITION;
	END"

db2 connect reset
